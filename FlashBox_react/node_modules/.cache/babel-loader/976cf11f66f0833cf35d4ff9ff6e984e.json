{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lozan\\\\lotus_prog\\\\FlashBox\\\\FlashBox_react\\\\src\\\\component\\\\pages\\\\signin\\\\form_signin\\\\signin_form.js\";\nimport React from \"react\"; // import FormSignInJson from './form_signin_json';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass FormSignIn extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      let isValid = this.handleValidation();\n\n      if (isValid) {\n        let data = {\n          \"usrname\": this.state.fields[\"usrname\"],\n          \"password\": this.state.fields[\"password\"]\n        }; //sending form data on button submition clicked\n\n        const response = await fetch('/users/loginForm', {\n          method: 'POST',\n          body: JSON.stringify({\n            data\n          }),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }).then(res => res.json()).then(json => this.setState({\n          data: json\n        })); //get respond from server\n        // const body = await response.text();\n\n        const body = this.state.data;\n        this.setState({\n          dataResponse: body.msg\n        });\n        console.log(\"respond body\" + body.user); // clear form\n\n        if (body.msg == 'OK') this.props.handleSuccessfulAuth(this.state.data);\n      }\n    };\n\n    this.state = {\n      fields: {},\n      errors: {}\n    };\n  }\n\n  handleValidation() {\n    let fields = this.state.fields;\n    let errors = {};\n    let formIsValid = true; //Email\n\n    if (!fields[\"usrname\"]) {\n      formIsValid = false;\n      errors[\"username\"] = \"Please enter your username\";\n    }\n\n    if (typeof fields[\"usrname\"] !== \"undefined\") {\n      var pattern = new RegExp(/^[a-z0-9_-]{5,15}$/);\n\n      if (!pattern.test(fields[\"email\"])) {\n        formIsValid = false;\n        errors[\"usrname\"] = \"Please enter valid usrname.\";\n      }\n    } //Password\n\n\n    if (!fields[\"password\"]) {\n      formIsValid = false;\n      errors[\"password\"] = \"Please enter your password.\";\n    }\n\n    this.setState({\n      errors: errors\n    });\n    return formIsValid;\n  }\n\n  handleChange(field, e) {\n    e.preventDefault();\n    let fields = this.state.fields;\n    fields[field] = e.target.value;\n    this.setState({\n      fields\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [this.props.data.map(item => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: item.for,\n            children: item.value\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: item.type,\n            class: \"form-control\",\n            placeholder: item.placeholder,\n            onChange: this.handleChange.bind(this, item.for),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-warning\",\n            children: this.state.errors[item.for]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/customerProfile\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          name: \"Submit\",\n          type: \"submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 40\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default FormSignIn;","map":{"version":3,"sources":["C:/Users/lozan/lotus_prog/FlashBox/FlashBox_react/src/component/pages/signin/form_signin/signin_form.js"],"names":["React","FormSignIn","Component","constructor","props","handleSubmit","e","preventDefault","isValid","handleValidation","data","state","fields","response","fetch","method","body","JSON","stringify","headers","then","res","json","setState","dataResponse","msg","console","log","user","handleSuccessfulAuth","errors","formIsValid","pattern","RegExp","test","handleChange","field","target","value","render","map","item","for","type","placeholder","bind"],"mappings":"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","sourcesContent":["import React from \"react\";\r\n// import FormSignInJson from './form_signin_json';\r\n\r\n\r\nclass FormSignIn extends React.Component{\r\n  constructor(props){\r\n      super(props);\r\n\r\n      this.state = {\r\n          fields: {},\r\n          errors: {}\r\n      }\r\n   }\r\n   handleValidation(){\r\n      let fields = this.state.fields;\r\n      let errors = {};\r\n      let formIsValid = true;\r\n\r\n      //Email\r\n\r\n      if (!fields[\"usrname\"]) {\r\n          formIsValid = false;\r\n          errors[\"username\"] = \"Please enter your username\";\r\n      }\r\n\r\n      if (typeof fields[\"usrname\"] !== \"undefined\") {\r\n          var pattern = new RegExp(/^[a-z0-9_-]{5,15}$/);\r\n          if (!pattern.test(fields[\"email\"])) {\r\n              formIsValid = false;\r\n          errors[\"usrname\"] = \"Please enter valid usrname.\";\r\n          }\r\n      }\r\n     //Password\r\n     if (!fields[\"password\"]) {\r\n         formIsValid = false;\r\n         errors[\"password\"] = \"Please enter your password.\";\r\n     }\r\n\r\n     this.setState({errors: errors});\r\n     return formIsValid;\r\n }\r\n\r\n handleSubmit = async e => {\r\n  e.preventDefault();\r\n  let isValid = this.handleValidation();\r\n  if (isValid) {\r\n    let data = {\r\n      \"usrname\": this.state.fields[\"usrname\"],\r\n      \"password\": this.state.fields[\"password\"]\r\n    }\r\n    //sending form data on button submition clicked\r\n    const response = await fetch('/users/loginForm', {\r\n      method: 'POST',\r\n      body: JSON.stringify({data}),\r\n      headers: {\r\n        'Content-Type' : 'application/json'\r\n      }\r\n    })\r\n    .then(res => res.json())\r\n    .then(json => this.setState({ data: json }));\r\n\r\n    //get respond from server\r\n    // const body = await response.text();\r\n    const body = this.state.data\r\n    this.setState({ dataResponse: body.msg });\r\n    console.log(\"respond body\" + body.user);\r\n\r\n    // clear form\r\n    if (body.msg == 'OK')\r\n      this.props.handleSuccessfulAuth(this.state.data)\r\n      }\r\n  }\r\n  handleChange(field, e){\r\n      e.preventDefault();\r\n      let fields = this.state.fields;\r\n      fields[field] = e.target.value;\r\n      this.setState({fields});\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <div>\r\n        {this.props.data.map((item)=>{\r\n          return(\r\n            <div className='form-group'>\r\n              <label for={item.for}>{item.value}</label>\r\n              <input\r\n                type={item.type}\r\n                class=\"form-control\"\r\n                placeholder={item.placeholder}\r\n                onChange={this.handleChange.bind(this, item.for)}\r\n                required/>\r\n                <div className=\"text-warning\">{this.state.errors[item.for]}</div>\r\n            </div>\r\n          )})}\r\n            <a href=\"/customerProfile\"><Button name=\"Submit\" type=\"submit\"/></a>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default FormSignIn;\r\n"]},"metadata":{},"sourceType":"module"}